nvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&J(t)&&(F(t.left)&&(i.left=t.left),F(t.top)&&(i.top=t.top),F(t.width)?(i.width=t.width,i.height=t.width/e):F(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i=void 0;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var i=this.cropBoxData,e=this.options.aspectRatio,a=void 0,n=void 0;return this.ready&&this.cropped&&!this.disabled&&J(t)&&(F(t.left)&&(i.left=t.left),F(t.top)&&(i.top=t.top),F(t.width)&&t.width!==i.width&&(a=!0,i.width=t.width),F(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),e&&(a?i.height=i.width/e:n&&(i.width=i.height*e)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i,e,a,n,o,h,r,s,d,c,l,p,m,g,u,f,v,w,x,b,y,M,C,D,B,k,T,W,H,N,E,z,L,Y,X,O,R,S,I=this.canvasData,A=(i=this.image,e=this.imageData,a=I,n=t,o=e.naturalWidth,h=e.naturalHeight,r=e.rotate,s=void 0===r?0:r,d=e.scaleX,c=void 0===d?1:d,l=e.scaleY,p=void 0===l?1:l,m=a.aspectRatio,g=a.naturalWidth,u=a.naturalHeight,f=n.fillColor,v=void 0===f?"transparent":f,w=n.imageSmoothingEnabled,x=void 0===w||w,b=n.imageSmoothingQuality,y=void 0===b?"low":b,M=n.maxWidth,C=void 0===M?1/0:M,D=n.maxHeight,B=void 0===D?1/0:D,k=n.minWidth,T=void 0===k?0:k,W=n.minHeight,H=void 0===W?0:W,N=document.createElement("canvas"),E=N.getContext("2d"),z=kt({aspectRatio:m,width:C,height:B}),L=kt({aspectRatio:m,width:T,height:H},"cover"),Y=Math.min(z.width,Math.max(L.width,g)),X=Math.min(z.height,Math.max(L.height,u)),O=Math.min(z.width,Math.max(L.width,o)),R=Math.min(z.height,Math.max(L.height,h)),S=[-O/2,-R/2,O,R],N.width=at(Y),N.height=at(X),E.fillStyle=v,E.fillRect(0,0,Y,X),E.save(),E.translate(Y/2,X/2),E.rotate(s*Math.PI/180),E.scale(c,p),E.imageSmoothingEnabled=x,E.imageSmoothingQuality=y,E.drawImage.apply(E,[i].concat(Q(S.map(function(t){return Math.floor(at(t))})))),E.restore(),N);if(!this.cropped)return A;var U=this.getData(),P=U.x,j=U.y,q=U.width,$=U.height,Z=A.width/Math.floor(I.naturalWidth);1!==Z&&(P*=Z,j*=Z,q*=Z,$*=Z);var F=q/$,K=kt({aspectRatio:F,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),V=kt({aspectRatio:F,width:t.minWidth||0,height:t.minHeight||0},"cover"),G=kt({aspectRatio:F,width:t.width||(1!==Z?A.width:q),height:t.height||(1!==Z?A.height:$)}),J=G.width,_=G.height;J=Math.min(K.width,Math.max(V.width,J)),_=Math.min(K.height,Math.max(V.height,_));var tt=document.createElement("canvas"),it=tt.getContext("2d");tt.width=at(J),tt.height=at(_),it.fillStyle=t.fillColor||"transparent",it.fillRect(0,0,J,_);var et=t.imageSmoothingEnabled,nt=void 0===et||et,ot=t.imageSmoothingQuality;it.imageSmoothingEnabled=nt,ot&&(it.imageSmoothingQuality=ot);var ht=A.width,rt=A.height,st=P,dt=j,ct=void 0,lt=void 0,pt=void 0,mt=void 0,gt=void 0,ut=void 0;st<=-q||st>ht?(st=0,ct=0,pt=0,gt=0):st<=0?(pt=-st,st=0,gt=ct=Math.min(ht,q+st)):st<=ht&&(pt=0,gt=ct=Math.min(q,ht-st)),ct<=0||dt<=-$||dt>rt?(dt=0,lt=0,mt=0,ut=0):dt<=0?(mt=-dt,dt=0,ut=lt=Math.min(rt,$+dt)):dt<=rt&&(mt=0,ut=lt=Math.min($,rt-dt));var ft=[st,dt,ct,lt];if(gt>0&&ut>0){var vt=J/q;ft.push(pt*vt,mt*vt,gt*vt,ut*vt)}return it.drawImage.apply(it,[A].concat(Q(ft.map(function(t){return Math.floor(at(t))})))),tt},setAspectRatio:function(t){var i=this.options;return this.disabled||K(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=t===M,o=i.movable&&t===C;t=n||o?t:D,i.dragMode=t,pt(e,b,t),st(e,g,n),st(e,x,o),i.cropBoxMovable||(pt(a,b,t),st(a,g,n),st(a,x,o))}return this}},Ot=t.Cropper,Rt=function(){function a(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(q(this,a),!t||!U.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=it({},P,J(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return $(a,[{key:"init",value:function(){var t=this.element,e=t.tagName.toLowerCase(),a=void 0;if(!lt(t,i)){if(pt(t,i,this),"img"===e){if(this.isImg=!0,a=t.getAttribute("src")||"",this.originalUrl=a,!a)return;a=t.src}else"canvas"===e&&window.HTMLCanvasElement&&(a=t.toDataURL());this.load(a)}}},{key:"load",value:function(t){var i=this;if(t){this.url=t,this.imageData={};var e=this.element,a=this.options;if(a.checkOrientation&&window.ArrayBuffer)if(I.test(t))A.test(t)?this.read((n=t.replace(Wt,""),o=atob(n),h=new ArrayBuffer(o.length),tt(r=new Uint8Array(h),function(t,i){r[i]=o.charCodeAt(i)}),h)):this.clone();else{var n,o,h,r,s=new XMLHttpRequest;this.reloading=!0,this.xhr=s;var d=function(){i.reloading=!1,i.xhr=null};s.ontimeout=d,s.onabort=d,s.onerror=function(){d(),i.clone()},s.onload=function(){d(),i.read(s.response)},a.checkCrossOrigin&&yt(t)&&e.crossOrigin&&(t=Mt(t)),s.open("get",t),s.responseType="arraybuffer",s.withCredentials="use-credent